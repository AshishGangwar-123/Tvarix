<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Tvarix</title>
    <link rel="icon" type="image/x-icon" href="/logo.png">
    <link rel="stylesheet" href="style.css">
    <script>
        // Protect Route
        if (!localStorage.getItem('adminToken')) {
            window.location.href = 'admin-login.html';
        }
    </script>
</head>

<body style="background-color: var(--gray-100);">

    <!-- Admin Navbar -->
    <nav class="navbar" style="position: sticky;">
        <div class="container">
            <div class="navbar-container">
                <div class="nav-logo-group">
                    <img src="/logo.png" alt="Tvarix" style="height: 40px; width: auto;">
                    <span style="font-weight: 700; color: var(--white);">Admin Panel</span>
                </div>
                <button id="logout-btn" class="nav-link"
                    style="background: none; border: none; cursor: pointer; color: #ef4444;">
                    Logout
                </button>
            </div>
        </div>
    </nav>

    <div class="container" style="margin-top: 2rem;">
        <h1 style="font-size: 1.875rem; font-weight: 700; margin-bottom: 2rem; color: var(--primary);">Dashboard
            Overview</h1>

        <!-- Stats Grid -->
        <div class="services-grid"
            style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); margin-bottom: 3rem;">
            <div class="service-card" style="align-items: flex-start; text-align: left; border-top-color: #3b82f6;">
                <h3 style="color: var(--gray-600); font-size: 1rem;">Total Intern Applications</h3>
                <p id="stat-interns" style="font-size: 2.5rem; font-weight: 800; color: var(--primary);">...</p>
            </div>
            <div class="service-card" style="align-items: flex-start; text-align: left; border-top-color: #10b981;">
                <h3 style="color: var(--gray-600); font-size: 1rem;">Total Contact Messages</h3>
                <p id="stat-contacts" style="font-size: 2.5rem; font-weight: 800; color: var(--primary);">...</p>
            </div>
        </div>

        <!-- Create User Section -->
        <div class="contact-form-card" style="background: white; margin-bottom: 2rem;">
            <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">Create New User</h2>
            <form id="create-user-form"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; align-items: end;">
                <div>
                    <label
                        style="display: block; font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.5rem;">Username</label>
                    <input type="text" name="username" required
                        style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 0.5rem;">
                </div>
                <div>
                    <label
                        style="display: block; font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.5rem;">Password</label>
                    <input type="password" name="password" required
                        style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 0.5rem;">
                </div>
                <div>
                    <label
                        style="display: block; font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.5rem;">Domain</label>
                    <select name="domain" required
                        style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 0.5rem; background: white;">
                        <option value="Frontend Development">Frontend Development</option>
                        <option value="Backend Development">Backend Development</option>
                        <option value="Full Stack Development">Full Stack Development</option>
                        <option value="App Development">App Development</option>
                        <option value="UI/UX Design">UI/UX Design</option>
                    </select>
                </div>
                <button type="submit" class="btn-submit" style="height: 48px;">Create User</button>
            </form>
            <p id="create-user-msg" style="margin-top: 1rem; font-size: 0.875rem; font-weight: 500;"></p>
        </div>

        <div style="display: grid; grid-template-columns: 1fr; gap: 2rem; margin-bottom: 4rem;">

            <!-- Student Submissions -->
            <div class="contact-form-card" style="background: white; grid-column: 1 / -1;">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">Student Task Submissions</h2>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; text-align: left; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid var(--gray-100);">
                                <th style="padding: 0.75rem; color: var(--gray-600);">Student</th>
                                <th style="padding: 0.75rem; color: var(--gray-600);">Domain</th>
                                <th style="padding: 0.75rem; color: var(--gray-600);">Task Links</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Injected JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Recent Interns -->
            <div class="contact-form-card" style="background: white;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                    <h2 style="font-size: 1.25rem; font-weight: 700;">Recent Intern Applications</h2>
                    <button onclick="downloadExcel()" class="btn-submit"
                        style="width: auto; padding: 0.5rem 1rem; font-size: 0.875rem; background-color: #059669;">
                        Export Excel
                    </button>
                </div>
                <!-- ... table ... -->
                <div style="overflow-x: auto;">
                    <table style="width: 100%; text-align: left; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid var(--gray-100);">
                                <th style="padding: 0.75rem; color: var(--gray-600);">Name</th>
                                <th style="padding: 0.75rem; color: var(--gray-600);">Domain</th>
                                <th style="padding: 0.75rem; color: var(--gray-600);">Year</th>
                                <th style="padding: 0.75rem; color: var(--gray-600);">Phone</th>
                                <th style="padding: 0.75rem; color: var(--gray-600);">Date</th>
                            </tr>
                        </thead>
                        <tbody id="interns-table-body">
                            <!-- Injected JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Recent Contacts -->
            <div class="contact-form-card" style="background: white;">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">Recent Messages</h2>
                <div id="contacts-list" style="display: flex; flex-direction: column; gap: 1rem;">
                    <!-- Injected JS -->
                </div>
            </div>

        </div>
    </div>

    <script src="admin.js"></script>
    <script>
        // Init Dashboard
        document.addEventListener('DOMContentLoaded', loadDashboardData);
    </script>
</body>

</html>